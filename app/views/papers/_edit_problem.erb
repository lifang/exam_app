<div class="products_list_style_box">
  <input type="hidden" name="edit_problem_<%= edit_problem.attributes["id"] %>" id="single_question_<%= edit_problem.attributes["id"] %>" value=""/>
  <div class="arrow" style="top:10px;"></div>
  <div class="question_pic_box" style="top:0px;">
    <div class="in">
      <%= form_for :problem , :url => "/problems/#{edit_problem.attributes["id"].to_i}/update_problem",
        :id=>"edit_form_#{edit_problem.attributes["id"]}",
        :html => {:onsubmit => "return generate_edit_questions('#{edit_problem.attributes["id"]}', '#{edit_problem.attributes["types"]}')"} do |f| %>
        <%= f.hidden_field :problem_xpath,:value=>"#{edit_problem.xpath}" %>
        <%= f.hidden_field :problem_id,:value=>"#{edit_problem.attributes["id"]}" %>
        <%= f.hidden_field :block_id,:value=>"#{edit_problem.parent.parent.attributes["id"]}" %>
        <%= f.hidden_field :paper_id,:value=>"#{@xml.attributes["id"]}" %>
        <div class="title">题面：</div>
        <input type="button" name="button" value="富文本" class="submit_btn"
               onclick="javascript:add_area('edit_title_<%= edit_problem.attributes["id"].to_i %>', this);" />
        <% title = edit_problem.elements["complete_title"].nil? ? edit_problem.elements["title"].text :
          edit_problem.elements["complete_title"].text %>
        <%= f.text_area :title ,:cols=>"45", :rows=>"3", :class=>"textarea_style",
          :id => "edit_title_#{edit_problem.attributes["id"].to_i}", :value=>title %>    
        <% question_ids = []
        edit_problem.elements["questions"].each_element do |question|
          question_ids << question.attributes["id"].to_i
        %>
          <% if edit_problem.attributes["types"].to_i == Problem::QUESTION_TYPE[:COLLIGATION] %>
            <div id="question_list_<%= question.attributes["id"] %>">
              <input type="hidden" name="make_edit_<%= question.attributes["id"] %>" id="make_edit_<%= question.attributes["id"] %>" value="0"/>
              <div style="border: 1px solid #ccc;padding-bottom: 5px;" id="remote_question_<%= question.attributes["id"] %>">
                <%= render :partial => "/common/show_single_question", :object => question %>
                <div class="chose_add">
                  <a href="javascript:void(0);"
                     onclick="javascript:edit_question(<%= question.attributes["id"].to_i %>,'<%= @xml.attributes["id"] %>', '<%= question.xpath %>')">编辑</a>
                  <a href="#">删除</a>
                </div>
                <div class="clear"></div>
              </div>
            </div>
          <% else %>
          <%= render :partial => "/common/edit_other_question", :object => question %>
          <% end %>
        <% end %>
        <input type="hidden" name="all_question_ids_<%= edit_problem.attributes["id"] %>"
               id="all_question_ids_<%= edit_problem.attributes["id"] %>" value="<%= question_ids.to_s %>" />
        <input type="hidden" name="edit_coll_question_<%= edit_problem.attributes["id"] %>"
               id="edit_coll_question_<%= edit_problem.attributes["id"] %>" value=""/>
        <%= f.submit "提交" , :class=>"submit_btn" %>
      <% end %>
    </div>
  </div>
</div>
